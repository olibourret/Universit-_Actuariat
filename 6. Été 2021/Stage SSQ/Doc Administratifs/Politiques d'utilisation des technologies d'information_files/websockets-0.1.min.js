!function(H){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=H();else if("function"==typeof define&&define.amd)define([],H);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);b.SockJS=H()}}(function(){return function b(e,a,d){function c(f,l){if(!a[f]){if(!e[f]){var n="function"==typeof require&&require;if(!l&&n)return n(f,!0);if(h)return h(f,!0);n=Error("Cannot find module '"+f+"'");throw n.code="MODULE_NOT_FOUND",
n;}n=a[f]={exports:{}};e[f][0].call(n.exports,function(a){var d=e[f][1][a];return c(d?d:a)},n,n.exports,b,e,a,d)}return a[f].exports}for(var h="function"==typeof require&&require,f=0;f<d.length;f++)c(d[f]);return c}({1:[function(b,e){var a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d=b("./transport-list");e.exports=b("./main")(d);"_sockjs_onload"in a&&setTimeout(a._sockjs_onload,1)},{"./main":14,"./transport-list":16}],2:[function(b,e){function a(){c.call(this);
this.initEvent("close",!1,!1);this.wasClean=!1;this.code=0;this.reason=""}var d=b("inherits"),c=b("./event");d(a,c);e.exports=a},{"./event":4,inherits:54}],3:[function(b,e){function a(){c.call(this)}var d=b("inherits"),c=b("./eventtarget");d(a,c);a.prototype.removeAllListeners=function(a){a?delete this._listeners[a]:this._listeners={}};a.prototype.once=function(a,d){function b(){c.removeListener(a,b);n||(n=!0,d.apply(this,arguments))}var c=this,n=!1;this.on(a,b)};a.prototype.emit=function(a){var d=
this._listeners[a];if(d)for(var b=Array.prototype.slice.call(arguments,1),c=0;c<d.length;c++)d[c].apply(this,b)};a.prototype.on=a.prototype.addListener=c.prototype.addEventListener;a.prototype.removeListener=c.prototype.removeEventListener;e.exports.EventEmitter=a},{"./eventtarget":5,inherits:54}],4:[function(b,e){function a(a){this.type=a}a.prototype.initEvent=function(a,b,h){return this.type=a,this.bubbles=b,this.cancelable=h,this.timeStamp=+new Date,this};a.prototype.stopPropagation=function(){};
a.prototype.preventDefault=function(){};a.CAPTURING_PHASE=1;a.AT_TARGET=2;a.BUBBLING_PHASE=3;e.exports=a},{}],5:[function(b,e){function a(){this._listeners={}}a.prototype.addEventListener=function(a,b){a in this._listeners||(this._listeners[a]=[]);var h=this._listeners[a];-1===h.indexOf(b)&&(h=h.concat([b]));this._listeners[a]=h};a.prototype.removeEventListener=function(a,b){var h=this._listeners[a];if(h){var f=h.indexOf(b);return-1!==f?void(1<h.length?this._listeners[a]=h.slice(0,f).concat(h.slice(f+
1)):delete this._listeners[a]):void 0}};a.prototype.dispatchEvent=function(a){var b=a.type,h=Array.prototype.slice.call(arguments,0);if(this["on"+b]&&this["on"+b].apply(this,h),b in this._listeners)for(var b=this._listeners[b],f=0;f<b.length;f++)b[f].apply(this,h)};e.exports=a},{}],6:[function(b,e){function a(a){c.call(this);this.initEvent("message",!1,!1);this.data=a}var d=b("inherits"),c=b("./event");d(a,c);e.exports=a},{"./event":4,inherits:54}],7:[function(b,e){function a(a){this._transport=a;
a.on("message",this._transportMessage.bind(this));a.on("close",this._transportClose.bind(this))}var d=b("json3"),c=b("./utils/iframe");a.prototype._transportClose=function(a,b){c.postMessage("c",d.stringify([a,b]))};a.prototype._transportMessage=function(a){c.postMessage("t",a)};a.prototype._send=function(a){this._transport.send(a)};a.prototype._close=function(){this._transport.close();this._transport.removeAllListeners()};e.exports=a},{"./utils/iframe":47,json3:55}],8:[function(b,e){var a=b("./utils/url"),
d=b("./utils/event"),c=b("json3"),h=b("./facade"),f=b("./info-iframe-receiver"),g=b("./utils/iframe"),l=b("./location");e.exports=function(b,k){var e={};k.forEach(function(a){a.facadeTransport&&(e[a.facadeTransport.transportName]=a.facadeTransport)});e[f.transportName]=f;var m;b.bootstrap_iframe=function(){var f;g.currentWindowId=l.hash.slice(1);d.attachEvent("message",function(d){if(d.source===parent&&("undefined"==typeof m&&(m=d.origin),d.origin===m)){var k;try{k=c.parse(d.data)}catch(v){return}if(k.windowId===
g.currentWindowId)switch(k.type){case "s":var t;try{t=c.parse(k.data)}catch(z){break}d=t[0];k=t[1];var B=t[2];t=t[3];if(d!==b.version)throw Error('Incompatibile SockJS! Main site uses: "'+d+'", the iframe: "'+b.version+'".');if(!a.isOriginEqual(B,l.href)||!a.isOriginEqual(t,l.href))throw Error("Can't connect to different domain from within an iframe. ("+l.href+", "+B+", "+t+")");f=new h(new e[k](B,t));break;case "m":f._send(k.data);break;case "c":f&&f._close(),f=null}}});g.postMessage("s")}}},{"./facade":7,
"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0,json3:55}],9:[function(b,e){function a(a,b){d.call(this);var c=this,k=+new Date;this.xo=new b("GET",a);this.xo.once("finish",function(a,b){var d,g;if(200===a){if(g=+new Date-k,b)try{d=h.parse(b)}catch(l){}f.isObject(d)||(d={})}c.emit("finish",d,g);c.removeAllListeners()})}var d=b("events").EventEmitter,c=b("inherits"),h=b("json3"),f=b("./utils/object");c(a,d);a.prototype.close=function(){this.removeAllListeners();
this.xo.close()};e.exports=a},{"./utils/object":49,debug:void 0,events:3,inherits:54,json3:55}],10:[function(b,e){function a(a){var b=this;c.call(this);this.ir=new g(a,f);this.ir.once("finish",function(a,d){b.ir=null;b.emit("message",h.stringify([a,d]))})}var d=b("inherits"),c=b("events").EventEmitter,h=b("json3"),f=b("./transport/sender/xhr-local"),g=b("./info-ajax");d(a,c);a.transportName="iframe-info-receiver";a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null);this.removeAllListeners()};
e.exports=a},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54,json3:55}],11:[function(b,e){(function(a){function d(b,d){var h=this;c.call(this);var e=function(){var a=h.ifr=new l(n.transportName,d,b);a.once("message",function(a){if(a){var b;try{b=f.parse(a)}catch(d){return h.emit("finish"),void h.close()}h.emit("finish",b[0],b[1])}h.close()});a.once("close",function(){h.emit("finish");h.close()})};a.document.body?e():g.attachEvent("load",e)}var c=b("events").EventEmitter,h=
b("inherits"),f=b("json3"),g=b("./utils/event"),l=b("./transport/iframe"),n=b("./info-iframe-receiver");h(d,c);d.enabled=function(){return l.enabled()};d.prototype.close=function(){this.ifr&&this.ifr.close();this.removeAllListeners();this.ifr=null};e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54,json3:55}],12:[function(b,
e){function a(a,b){var f=this;d.call(this);setTimeout(function(){f.doXhr(a,b)},0)}var d=b("events").EventEmitter,c=b("inherits"),h=b("./utils/url"),f=b("./transport/sender/xdr"),g=b("./transport/sender/xhr-cors"),l=b("./transport/sender/xhr-local"),n=b("./transport/sender/xhr-fake"),k=b("./info-iframe"),q=b("./info-ajax");c(a,d);a._getReceiver=function(a,b,d){return d.sameOrigin?new q(b,l):g.enabled?new q(b,g):f.enabled&&d.sameScheme?new q(b,f):k.enabled()?new k(a,b):new q(b,n)};a.prototype.doXhr=
function(b,d){var f=this,g=h.addPath(b,"/info");this.xo=a._getReceiver(b,g,d);this.timeoutRef=setTimeout(function(){f._cleanup(!1);f.emit("finish")},a.timeout);this.xo.once("finish",function(a,b){f._cleanup(!0);f.emit("finish",a,b)})};a.prototype._cleanup=function(a){clearTimeout(this.timeoutRef);this.timeoutRef=null;!a&&this.xo&&this.xo.close();this.xo=null};a.prototype.close=function(){this.removeAllListeners();this._cleanup(!1)};a.timeout=8E3;e.exports=a},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,
"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(b,e){e.exports=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}},{}],14:[function(b,e){(function(a){function d(a,b,f){if(!(this instanceof d))return new d(a,b,f);if(1>
arguments.length)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");t.call(this);this.readyState=d.CONNECTING;this.protocol=this.extensions="";f=f||{};f.protocols_whitelist&&y.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.");this._transportsWhitelist=f.transports;var g=f.sessionId||8;if("function"==typeof g)this._generateSessionId=g;else{if("number"!=typeof g)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");
this._generateSessionId=function(){return l.string(g)}}this._server=f.server||l.numberString(1E3);var c=new h(a);if(!c.host||!c.protocol)throw new SyntaxError("The URL '"+a+"' is invalid");if(c.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==c.protocol&&"https:"!==c.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+c.protocol+"' is not allowed.");var n="https:"===c.protocol;if("https"===z.protocol&&!n)throw Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");
b?Array.isArray(b)||(b=[b]):b=[];var e=b.sort();e.forEach(function(a,b){if(!a)throw new SyntaxError("The protocols entry '"+a+"' is invalid.");if(b<e.length-1&&a===e[b+1])throw new SyntaxError("The protocols entry '"+a+"' is duplicated.");});this._origin=(n=k.getOrigin(z.href))?n.toLowerCase():null;c.set("pathname",c.pathname.replace(/\/+$/,""));this.url=c.href;this._urlInfo={nullOrigin:!s.hasDomain(),sameOrigin:k.isOriginEqual(this.url,z.href),sameScheme:k.isSchemeEqual(this.url,z.href)};this._ir=
new S(this.url,this._urlInfo);this._ir.once("finish",this._receiveInfo.bind(this))}b("./shims");var c,h=b("url-parse"),f=b("inherits"),g=b("json3"),l=b("./utils/random"),n=b("./utils/escape"),k=b("./utils/url"),q=b("./utils/event"),m=b("./utils/transport"),r=b("./utils/object"),s=b("./utils/browser"),y=b("./utils/log"),v=b("./event/event"),t=b("./event/eventtarget"),z=b("./location"),B=b("./event/close"),A=b("./event/trans-message"),S=b("./info-receiver");f(d,t);d.prototype.close=function(a,b){if(a&&
!(1E3===a||3E3<=a&&4999>=a))throw Error("InvalidAccessError: Invalid code");if(b&&123<b.length)throw new SyntaxError("reason argument has an invalid length");this.readyState!==d.CLOSING&&this.readyState!==d.CLOSED&&this._close(a||1E3,b||"Normal closure",!0)};d.prototype.send=function(a){if("string"!=typeof a&&(a=""+a),this.readyState===d.CONNECTING)throw Error("InvalidStateError: The connection has not been established yet");this.readyState===d.OPEN&&this._transport.send(n.quote(a))};d.version=b("./version");
d.CONNECTING=0;d.OPEN=1;d.CLOSING=2;d.CLOSED=3;d.prototype._receiveInfo=function(a,b){if(this._ir=null,!a)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(b);this._transUrl=a.base_url?a.base_url:this.url;a=r.extend(a,this._urlInfo);this._transports=c.filterToEnabled(this._transportsWhitelist,a).main;this._connect()};d.prototype._connect=function(){for(var b=this._transports.shift();b;){if(b.needBody&&(!a.document.body||"undefined"!=typeof a.document.readyState&&"complete"!==
a.document.readyState&&"interactive"!==a.document.readyState))return this._transports.unshift(b),void q.attachEvent("load",this._connect.bind(this));var d=this._rto*b.roundTrips||5E3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),d);d=k.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId());d=new b(d,this._transUrl);return d.on("message",this._transportMessage.bind(this)),d.once("close",this._transportClose.bind(this)),d.transportName=b.transportName,void(this._transport=
d)}this._close(2E3,"All transports failed",!1)};d.prototype._transportTimeout=function(){this.readyState===d.CONNECTING&&this._transportClose(2007,"Transport timed out")};d.prototype._transportMessage=function(a){var b,d=this,f=a.slice(0,1);a=a.slice(1);switch(f){case "o":return void this._open();case "h":return void this.dispatchEvent(new v("heartbeat"))}if(a)try{b=g.parse(a)}catch(c){}if("undefined"!=typeof b)switch(f){case "a":Array.isArray(b)&&b.forEach(function(a){d.dispatchEvent(new A(a))});
break;case "m":this.dispatchEvent(new A(b));break;case "c":Array.isArray(b)&&2===b.length&&this._close(b[0],b[1],!0)}};d.prototype._transportClose=function(a,b){return this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),1E3===a||3E3<=a&&4999>=a||2E3===a||this.readyState!==d.CONNECTING?void this._close(a,b):void this._connect()};d.prototype._open=function(){this.readyState===d.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),
this._transportTimeoutId=null),this.readyState=d.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open"))):this._close(1006,"Server lost session")};d.prototype._close=function(a,b,f){var c=!1;if(this._ir&&(c=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===d.CLOSED)throw Error("InvalidStateError: SockJS has already been closed");this.readyState=d.CLOSING;setTimeout(function(){this.readyState=
d.CLOSED;c&&this.dispatchEvent(new v("error"));var g=new B("close");g.wasClean=f||!1;g.code=a||1E3;g.reason=b;this.dispatchEvent(g);this.onmessage=this.onclose=this.onerror=null}.bind(this),0)};d.prototype.countRTO=function(a){return 100<a?4*a:300+a};e.exports=function(a){return c=m(a),b("./iframe-bootstrap")(d,a),d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,
"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,json3:55,"url-parse":56}],15:[function(){function b(){}var e,a=Array.prototype,d=Object.prototype,c=Function.prototype,h=String.prototype,f=a.slice,g=d.toString,l;if(l=Object.defineProperty)try{l=(Object.defineProperty({},"x",{}),!0)}catch(n){l=
!1}e=l?function(a,b,d,f){!f&&b in a||Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:d})}:function(a,b,d,f){!f&&b in a||(a[b]=d)};l=function(a,b,f){for(var c in b)d.hasOwnProperty.call(b,c)&&e(a,c,b[c],f)};var k=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)};l(c,{bind:function(a){var c=this;if("[object Function]"!==d.toString.call(c))throw new TypeError("Function.prototype.bind called on incompatible "+c);for(var g=f.call(arguments,
1),l=Math.max(0,c.length-g.length),k=[],h=0;l>h;h++)k.push("$"+h);var n=Function("binder","return function ("+k.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof n){var b=c.apply(this,g.concat(f.call(arguments)));return Object(b)===b?b:this}return c.apply(a,g.concat(f.call(arguments)))});return c.prototype&&(b.prototype=c.prototype,n.prototype=new b,b.prototype=null),n}});l(Array,{isArray:function(a){return"[object Array]"===g.call(a)}});var c=Object("a"),q="a"!==
c[0]||!(0 in c);l(a,{forEach:function(a,b){var f=k(this),c=q&&"[object String]"===g.call(this)?this.split(""):f,l=-1,h=c.length>>>0;if("[object Function]"!==d.toString.call(a))throw new TypeError;for(;++l<h;)l in c&&a.call(b,c[l],l,f)}},!function(a){var b=!0,d=!0;return a&&(a.call("foo",function(a,d,f){"object"!=typeof f&&(b=!1)}),a.call([1],function(){d="string"==typeof this},"x")),!!a&&b&&d}(a.forEach));c=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);l(a,{indexOf:function(a){var b=q&&"[object String]"===
g.call(this)?this.split(""):k(this),d=b.length>>>0;if(!d)return-1;var f=0;if(1<arguments.length)var c=+arguments[1],f=(c!==c?c=0:0!==c&&c!==1/0&&c!==-(1/0)&&(c=(0<c||-1)*Math.floor(Math.abs(c))),c);for(f=0<=f?f:Math.max(0,d+f);d>f;f++)if(f in b&&b[f]===a)return f;return-1}},c);var m=h.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||1<".".split(/()()/).length?!function(){var b=void 0===
/()??/.exec("")[1];h.split=function(f,d){var c=this;if(void 0===f&&0===d)return[];if("[object RegExp]"!==g.call(f))return m.call(this,f,d);var l,k,h,n,e=[],q=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.extended?"x":"")+(f.sticky?"y":""),r=0;f=RegExp(f.source,q+"g");c+="";b||(l=RegExp("^"+f.source+"$(?!\\s)",q));for(d=void 0===d?4294967295:d>>>0;(k=f.exec(c))&&(h=k.index+k[0].length,!(h>r&&(e.push(c.slice(r,k.index)),!b&&1<k.length&&k[0].replace(l,function(){for(var a=1;a<arguments.length-2;a++)void 0===
arguments[a]&&(k[a]=void 0)}),1<k.length&&k.index<c.length&&a.push.apply(e,k.slice(1)),n=k[0].length,r=h,e.length>=d)));)f.lastIndex===k.index&&f.lastIndex++;return r===c.length?(n||!f.test(""))&&e.push(""):e.push(c.slice(r)),e.length>d?e.slice(0,d):e}}():"0".split(void 0,0).length&&(h.split=function(a,b){return void 0===a&&0===b?[]:m.call(this,a,b)});var r=RegExp("^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*"),
s=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$"),c=h.trim&&("\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff".trim()||!"\u200b".trim());l(h,{trim:function(){if(void 0===this||null===
this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(r,"").replace(s,"")}},c);var y=h.substr,c="".substr&&"b"!=="0b".substr(-1);l(h,{substr:function(a,b){return y.call(this,0>a&&0>(a=this.length+a)?0:a,b)}},c)},{}],16:[function(b,e){e.exports=[b("./transport/websocket"),b("./transport/xhr-streaming"),b("./transport/xdr-streaming"),b("./transport/eventsource"),b("./transport/lib/iframe-wrap")(b("./transport/eventsource")),b("./transport/htmlfile"),b("./transport/lib/iframe-wrap")(b("./transport/htmlfile")),
b("./transport/xhr-polling"),b("./transport/xdr-polling"),b("./transport/lib/iframe-wrap")(b("./transport/xhr-polling")),b("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(b,e){(function(a){function d(a,b,f,d){var g=this;c.call(this);setTimeout(function(){g._start(a,
b,f,d)},0)}var c=b("events").EventEmitter,h=b("inherits"),f=b("../../utils/event"),g=b("../../utils/url"),l=a.XMLHttpRequest;h(d,c);d.prototype._start=function(a,b,c,k){var h=this;try{this.xhr=new l}catch(n){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();b=g.addQuery(b,"t="+ +new Date);this.unloadRef=f.unloadAdd(function(){h._cleanup(!0)});try{this.xhr.open(a,b,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){h.emit("finish",
0,"");h._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(k&&k.noCredentials||!d.supportsCORS||(this.xhr.withCredentials="true"),k&&k.headers)for(var z in k.headers)this.xhr.setRequestHeader(z,k.headers[z]);this.xhr.onreadystatechange=function(){if(h.xhr){var a,b,f=h.xhr;switch(f.readyState){case 3:try{b=f.status,a=f.responseText}catch(d){}1223===b&&(b=204);200===b&&a&&0<a.length&&h.emit("chunk",b,a);break;case 4:b=f.status,1223===b&&(b=204),12005!==b&&12029!==b||(b=
0),h.emit("finish",b,f.responseText),h._cleanup(!1)}}};try{h.xhr.send(c)}catch(B){h.emit("finish",0,""),h._cleanup(!1)}};d.prototype._cleanup=function(a){if(this.xhr){if(this.removeAllListeners(),f.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),a)try{this.xhr.abort()}catch(b){}this.unloadRef=this.xhr=null}};d.prototype.close=function(){this._cleanup(!0)};d.enabled=!!l;var n=["Active"].concat("Object").join("X");!d.enabled&&n in a&&
(l=function(){try{return new a[n]("Microsoft.XMLHTTP")}catch(b){return null}},d.enabled=!!new l);h=!1;try{h="withCredentials"in new l}catch(k){}d.supportsCORS=h;e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(b,e){e.exports=("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).EventSource},
{}],19:[function(b,e){var a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};e.exports=a.WebSocket||a.MozWebSocket},{}],20:[function(b,e){function a(b){if(!a.enabled())throw Error("Transport created when disabled");c.call(this,b,"/eventsource",h,f)}var d=b("inherits"),c=b("./lib/ajax-based"),h=b("./receiver/eventsource"),f=b("./sender/xhr-cors"),g=b("eventsource");d(a,c);a.enabled=function(){return!!g};a.transportName="eventsource";a.roundTrips=
2;e.exports=a},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(b,e){function a(a){if(!c.enabled)throw Error("Transport created when disabled");f.call(this,a,"/htmlfile",c,h)}var d=b("inherits"),c=b("./receiver/htmlfile"),h=b("./sender/xhr-local"),f=b("./lib/ajax-based");d(a,f);a.enabled=function(a){return c.enabled&&a.sameOrigin};a.transportName="htmlfile";a.roundTrips=2;e.exports=a},{"./lib/ajax-based":24,"./receiver/htmlfile":30,
"./sender/xhr-local":37,inherits:54}],22:[function(b,e){function a(b,f,d){if(!a.enabled())throw Error("Transport created when disabled");h.call(this);var c=this;this.origin=g.getOrigin(d);this.baseUrl=d;this.transUrl=f;this.transport=b;this.windowId=k.string(8);b=g.addPath(d,"/iframe.html")+"#"+this.windowId;this.iframeObj=l.createIframe(b,function(a){c.emit("close",1006,"Unable to load an iframe ("+a+")");c.close()});this.onmessageCallback=this._message.bind(this);n.attachEvent("message",this.onmessageCallback)}
var d=b("inherits"),c=b("json3"),h=b("events").EventEmitter,f=b("../version"),g=b("../utils/url"),l=b("../utils/iframe"),n=b("../utils/event"),k=b("../utils/random");d(a,h);a.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){n.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(a){}this.iframeObj.cleanup();this.onmessageCallback=this.iframeObj=this.iframeObj=null}};a.prototype._message=function(a){if(g.isOriginEqual(a.origin,this.origin)){var b;try{b=
c.parse(a.data)}catch(d){return}if(b.windowId===this.windowId)switch(b.type){case "s":this.iframeObj.loaded();this.postMessage("s",c.stringify([f,this.transport,this.transUrl,this.baseUrl]));break;case "t":this.emit("message",b.data);break;case "c":var l;try{l=c.parse(b.data)}catch(k){break}this.emit("close",l[0],l[1]);this.close()}}};a.prototype.postMessage=function(a,b){this.iframeObj.post(c.stringify({windowId:this.windowId,type:a,data:b||""}),this.origin)};a.prototype.send=function(a){this.postMessage("m",
a)};a.enabled=function(){return l.iframeEnabled};a.transportName="iframe";a.roundTrips=2;e.exports=a},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54,json3:55}],23:[function(b,e){(function(a){function d(a){if(!d.enabled())throw Error("Transport created when disabled");h.call(this,a,"/jsonp",g,f)}var c=b("inherits"),h=b("./lib/sender-receiver"),f=b("./receiver/jsonp"),g=b("./sender/jsonp");c(d,h);d.enabled=function(){return!!a.document};
d.transportName="jsonp-polling";d.roundTrips=1;d.needBody=!0;e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(b,e){function a(a){return function(b,f,d){var c={};"string"==typeof f&&(c.headers={"Content-type":"text/plain"});b=h.addPath(b,"/xhr_send");var e=new a("POST",b,f,c);return e.once("finish",function(a){return e=null,200!==
a&&204!==a?d(Error("http status "+a)):void d()}),function(){e.close();e=null;var a=Error("Aborted");a.code=1E3;d(a)}}}function d(b,d,c,k){f.call(this,b,d,a(k),c,k)}var c=b("inherits"),h=b("../../utils/url"),f=b("./sender-receiver");c(d,f);e.exports=d},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(b,e){function a(a,b){c.call(this);this.sendBuffer=[];this.sender=b;this.url=a}var d=b("inherits"),c=b("events").EventEmitter;d(a,c);a.prototype.send=function(a){this.sendBuffer.push(a);
this.sendStop||this.sendSchedule()};a.prototype.sendScheduleWait=function(){var a,b=this;this.sendStop=function(){b.sendStop=null;clearTimeout(a)};a=setTimeout(function(){b.sendStop=null;b.sendSchedule()},25)};a.prototype.sendSchedule=function(){var a=this;if(0<this.sendBuffer.length){var b="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,b,function(b){a.sendStop=null;b?(a.emit("close",b.code||1006,"Sending error: "+b),a._cleanup()):a.sendScheduleWait()});this.sendBuffer=[]}};
a.prototype._cleanup=function(){this.removeAllListeners()};a.prototype.stop=function(){this._cleanup();this.sendStop&&(this.sendStop(),this.sendStop=null)};e.exports=a},{debug:void 0,events:3,inherits:54}],26:[function(b,e){(function(a){var d=b("inherits"),c=b("../iframe"),h=b("../../utils/object");e.exports=function(b){function g(a,d){c.call(this,b.transportName,a,d)}return d(g,c),g.enabled=function(d,g){if(!a.document)return!1;var k=h.extend({},g);return k.sameOrigin=!0,b.enabled(k)&&c.enabled()},
g.transportName="iframe-"+b.transportName,g.needBody=!0,g.roundTrips=c.roundTrips+b.roundTrips-1,g.facadeTransport=b,g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(b,e){function a(a,b,d){c.call(this);this.Receiver=a;this.receiveUrl=b;this.AjaxObject=d;this._scheduleReceiver()}var d=b("inherits"),c=b("events").EventEmitter;d(a,c);a.prototype._scheduleReceiver=function(){var a=
this,b=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);b.on("message",function(b){a.emit("message",b)});b.once("close",function(d,c){a.poll=b=null;a.pollIsClosing||("network"===c?a._scheduleReceiver():(a.emit("close",d||1006,c),a.removeAllListeners()))})};a.prototype.abort=function(){this.removeAllListeners();this.pollIsClosing=!0;this.poll&&this.poll.abort()};e.exports=a},{debug:void 0,events:3,inherits:54}],28:[function(b,e){function a(a,b,d,k,e){b=c.addPath(a,b);var m=this;h.call(this,
a,d);this.poll=new f(k,b,e);this.poll.on("message",function(a){m.emit("message",a)});this.poll.once("close",function(a,b){m.poll=null;m.emit("close",a,b);m.close()})}var d=b("inherits"),c=b("../../utils/url"),h=b("./buffered-sender"),f=b("./polling");d(a,h);a.prototype.close=function(){this.removeAllListeners();this.poll&&(this.poll.abort(),this.poll=null);this.stop()};e.exports=a},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(b,e){function a(a){c.call(this);
var b=this,d=this.es=new h(a);d.onmessage=function(a){b.emit("message",decodeURI(a.data))};d.onerror=function(a){a=2!==d.readyState?"network":"permanent";b._cleanup();b._close(a)}}var d=b("inherits"),c=b("events").EventEmitter,h=b("eventsource");d(a,c);a.prototype.abort=function(){this._cleanup();this._close("user")};a.prototype._cleanup=function(){var a=this.es;a&&(a.onmessage=a.onerror=null,a.close(),this.es=null)};a.prototype._close=function(a){var b=this;setTimeout(function(){b.emit("close",null,
a);b.removeAllListeners()},200)};e.exports=a},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(b,e){(function(a){function d(b){g.call(this);var c=this;h.polluteGlobalNamespace();this.id="a"+l.string(6);b=f.addQuery(b,"c="+decodeURIComponent(h.WPrefix+"."+this.id));var e=d.htmlfileEnabled?h.createHtmlfile:h.createIframe;a[h.WPrefix][this.id]={start:function(){c.iframeObj.loaded()},message:function(a){c.emit("message",a)},stop:function(){c._cleanup();c._close("network")}};this.iframeObj=
e(b,function(){c._cleanup();c._close("permanent")})}var c=b("inherits"),h=b("../../utils/iframe"),f=b("../../utils/url"),g=b("events").EventEmitter,l=b("../../utils/random");c(d,g);d.prototype.abort=function(){this._cleanup();this._close("user")};d.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null);delete a[h.WPrefix][this.id]};d.prototype._close=function(a){this.emit("close",null,a);this.removeAllListeners()};d.htmlfileEnabled=!1;c=["Active"].concat("Object").join("X");
if(c in a)try{d.htmlfileEnabled=!!new a[c]("htmlfile")}catch(n){}d.enabled=d.htmlfileEnabled||h.iframeEnabled;e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(b,e){(function(a){function d(b){var f=this;n.call(this);c.polluteGlobalNamespace();this.id="a"+h.string(6);b=g.addQuery(b,"c="+encodeURIComponent(c.WPrefix+
"."+this.id));a[c.WPrefix][this.id]=this._callback.bind(this);this._createScript(b);this.timeoutId=setTimeout(function(){f._abort(Error("JSONP script loaded abnormally (timeout)"))},d.timeout)}var c=b("../../utils/iframe"),h=b("../../utils/random"),f=b("../../utils/browser"),g=b("../../utils/url"),l=b("inherits"),n=b("events").EventEmitter;l(d,n);d.prototype.abort=function(){if(a[c.WPrefix][this.id]){var b=Error("JSONP user aborted read");b.code=1E3;this._abort(b)}};d.timeout=35E3;d.scriptErrorTimeout=
1E3;d.prototype._callback=function(a){this._cleanup();this.aborting||(a&&this.emit("message",a),this.emit("close",null,"network"),this.removeAllListeners())};d.prototype._abort=function(a){this._cleanup();this.aborting=!0;this.emit("close",a.code,a.message);this.removeAllListeners()};d.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var b=this.script;b.parentNode.removeChild(b);this.script=
b.onreadystatechange=b.onerror=b.onload=b.onclick=null}delete a[c.WPrefix][this.id]};d.prototype._scriptError=function(){var a=this;this.errorTimer||(this.errorTimer=setTimeout(function(){a.loadedOkay||a._abort(Error("JSONP script loaded abnormally (onerror)"))},d.scriptErrorTimeout))};d.prototype._createScript=function(b){var d,c=this,g=this.script=a.document.createElement("script");if(g.id="a"+h.string(8),g.src=b,g.type="text/javascript",g.charset="UTF-8",g.onerror=this._scriptError.bind(this),
g.onload=function(){c._abort(Error("JSONP script loaded abnormally (onload)"))},g.onreadystatechange=function(){if(/loaded|closed/.test(g.readyState)){if(g&&g.htmlFor&&g.onclick){c.loadedOkay=!0;try{g.onclick()}catch(a){}}g&&c._abort(Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof g.async&&a.document.attachEvent)if(f.isOpera())d=this.script2=a.document.createElement("script"),d.text="try{var a = document.getElementById('"+g.id+"'); if(a)a.onerror();}catch(x){};",
g.async=d.async=!1;else{try{g.htmlFor=g.id,g.event="onclick"}catch(l){}g.async=!0}"undefined"!=typeof g.async&&(g.async=!0);b=a.document.getElementsByTagName("head")[0];b.insertBefore(g,b.firstChild);d&&b.insertBefore(d,b.firstChild)};e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(b,
e){function a(a,b){c.call(this);var d=this;this.bufferPosition=0;this.xo=new b("POST",a,null);this.xo.on("chunk",this._chunkHandler.bind(this));this.xo.once("finish",function(a,b){d._chunkHandler(a,b);d.xo=null;d.emit("close",null,200===a?"network":"permanent");d._cleanup()})}var d=b("inherits"),c=b("events").EventEmitter;d(a,c);a.prototype._chunkHandler=function(a,b){if(200===a&&b)for(var d=-1;;this.bufferPosition+=d+1){var c=b.slice(this.bufferPosition);if(d=c.indexOf("\n"),-1===d)break;(c=c.slice(0,
d))&&this.emit("message",c)}};a.prototype._cleanup=function(){this.removeAllListeners()};a.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null);this._cleanup()};e.exports=a},{debug:void 0,events:3,inherits:54}],33:[function(b,e){(function(a){function d(b){try{return a.document.createElement('<iframe name="'+b+'">')}catch(d){var c=a.document.createElement("iframe");return c.name=b,c}}var c,h,f=b("../../utils/random"),g=b("../../utils/url");e.exports=function(b,
e,k){c||(c=a.document.createElement("form"),c.style.display="none",c.style.position="absolute",c.method="POST",c.enctype="application/x-www-form-urlencoded",c.acceptCharset="UTF-8",h=a.document.createElement("textarea"),h.name="d",c.appendChild(h),a.document.body.appendChild(c));var q="a"+f.string(8);c.target=q;c.action=g.addQuery(g.addPath(b,"/jsonp_send"),"i="+q);var m=d(q);m.id=q;m.style.display="none";c.appendChild(m);try{h.value=e}catch(r){}c.submit();var s=function(a){m.onerror&&(m.onreadystatechange=
m.onerror=m.onload=null,setTimeout(function(){m.parentNode.removeChild(m);m=null},500),h.value="",k(a))};return m.onerror=function(){s()},m.onload=function(){s()},m.onreadystatechange=function(a){"complete"===m.readyState&&s()},function(){s(Error("Aborted"))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(b,e){(function(a){function d(a,b,d){var f=this;c.call(this);
setTimeout(function(){f._start(a,b,d)},0)}var c=b("events").EventEmitter,h=b("inherits"),f=b("../../utils/event"),g=b("../../utils/browser"),l=b("../../utils/url");h(d,c);d.prototype._start=function(b,d,c){var g=this,h=new a.XDomainRequest;d=l.addQuery(d,"t="+ +new Date);h.onerror=function(){g._error()};h.ontimeout=function(){g._error()};h.onprogress=function(){g.emit("chunk",200,h.responseText)};h.onload=function(){g.emit("finish",200,h.responseText);g._cleanup(!1)};this.xdr=h;this.unloadRef=f.unloadAdd(function(){g._cleanup(!0)});
try{this.xdr.open(b,d),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(c)}catch(e){this._error()}};d.prototype._error=function(){this.emit("finish",0,"");this._cleanup(!1)};d.prototype._cleanup=function(a){if(this.xdr){if(this.removeAllListeners(),f.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,a)try{this.xdr.abort()}catch(b){}this.unloadRef=this.xdr=null}};d.prototype.close=function(){this._cleanup(!0)};d.enabled=!(!a.XDomainRequest||
!g.hasDomain());e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(b,e){function a(a,b,d,l){c.call(this,a,b,d,l)}var d=b("inherits"),c=b("../driver/xhr");d(a,c);a.enabled=c.enabled&&c.supportsCORS;e.exports=a},{"../driver/xhr":17,inherits:54}],36:[function(b,e){function a(){var b=this;d.call(this);this.to=
setTimeout(function(){b.emit("finish",200,"{}")},a.timeout)}var d=b("events").EventEmitter;b("inherits")(a,d);a.prototype.close=function(){clearTimeout(this.to)};a.timeout=2E3;e.exports=a},{events:3,inherits:54}],37:[function(b,e){function a(a,b,d){c.call(this,a,b,d,{noCredentials:!0})}var d=b("inherits"),c=b("../driver/xhr");d(a,c);a.enabled=c.enabled;e.exports=a},{"../driver/xhr":17,inherits:54}],38:[function(b,e){function a(b){if(!a.enabled())throw Error("Transport created when disabled");f.call(this);
var h=this;b=c.addPath(b,"/websocket");this.url=b="https"===b.slice(0,5)?"wss"+b.slice(5):"ws"+b.slice(4);this.ws=new g(this.url);this.ws.onmessage=function(a){h.emit("message",a.data)};this.unloadRef=d.unloadAdd(function(){h.ws.close()});this.ws.onclose=function(a){h.emit("close",a.code,a.reason);h._cleanup()};this.ws.onerror=function(a){h.emit("close",1006,"WebSocket connection broken");h._cleanup()}}var d=b("../utils/event"),c=b("../utils/url"),h=b("inherits"),f=b("events").EventEmitter,g=b("./driver/websocket");
h(a,f);a.prototype.send=function(a){this.ws.send("["+a+"]")};a.prototype.close=function(){this.ws&&this.ws.close();this._cleanup()};a.prototype._cleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=a.onerror=null);d.unloadDel(this.unloadRef);this.unloadRef=this.ws=null;this.removeAllListeners()};a.enabled=function(){return!!g};a.transportName="websocket";a.roundTrips=2;e.exports=a},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(b,
e){function a(a){if(!g.enabled)throw Error("Transport created when disabled");c.call(this,a,"/xhr",f,g)}var d=b("inherits"),c=b("./lib/ajax-based"),h=b("./xdr-streaming"),f=b("./receiver/xhr"),g=b("./sender/xdr");d(a,c);a.enabled=h.enabled;a.transportName="xdr-polling";a.roundTrips=2;e.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(b,e){function a(a){if(!f.enabled)throw Error("Transport created when disabled");c.call(this,a,
"/xhr_streaming",h,f)}var d=b("inherits"),c=b("./lib/ajax-based"),h=b("./receiver/xhr"),f=b("./sender/xdr");d(a,c);a.enabled=function(a){return a.cookie_needed||a.nullOrigin?!1:f.enabled&&a.sameScheme};a.transportName="xdr-streaming";a.roundTrips=2;e.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(b,e){function a(a){if(!g.enabled&&!f.enabled)throw Error("Transport created when disabled");c.call(this,a,"/xhr",h,f)}var d=b("inherits"),c=b("./lib/ajax-based"),
h=b("./receiver/xhr"),f=b("./sender/xhr-cors"),g=b("./sender/xhr-local");d(a,c);a.enabled=function(a){return a.nullOrigin?!1:g.enabled&&a.sameOrigin?!0:f.enabled};a.transportName="xhr-polling";a.roundTrips=2;e.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(b,e){(function(a){function d(a){if(!l.enabled&&!g.enabled)throw Error("Transport created when disabled");h.call(this,a,"/xhr_streaming",f,g)}var c=b("inherits"),h=
b("./lib/ajax-based"),f=b("./receiver/xhr"),g=b("./sender/xhr-cors"),l=b("./sender/xhr-local"),n=b("../utils/browser");c(d,h);d.enabled=function(a){return a.nullOrigin?!1:n.isOpera()?!1:g.enabled};d.transportName="xhr-streaming";d.roundTrips=2;d.needBody=!!a.document;e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,
inherits:54}],43:[function(b,e){(function(a){e.exports.randomBytes=a.crypto&&a.crypto.getRandomValues?function(b){b=new Uint8Array(b);return a.crypto.getRandomValues(b),b}:function(a){for(var b=Array(a),h=0;a>h;h++)b[h]=Math.floor(256*Math.random());return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(b,e){(function(a){e.exports={isOpera:function(){return a.navigator&&/opera/i.test(a.navigator.userAgent)},isKonqueror:function(){return a.navigator&&
/konqueror/i.test(a.navigator.userAgent)},hasDomain:function(){if(!a.document)return!0;try{return!!a.document.domain}catch(b){return!1}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(b,e){var a,d=b("json3"),c=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,
h=function(a){var b,d={},c=[];for(b=0;65536>b;b++)c.push(String.fromCharCode(b));return a.lastIndex=0,c.join("").replace(a,function(a){return d[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),a.lastIndex=0,d};e.exports={quote:function(b){b=d.stringify(b);return c.lastIndex=0,c.test(b)?(a||(a=h(c)),b.replace(c,function(b){return a[b]})):b}}},{json3:55}],46:[function(b,e){(function(a){var d=b("./random"),c={},h=!1,f=a.chrome&&a.chrome.app&&a.chrome.app.runtime;e.exports={attachEvent:function(b,
d){"undefined"!=typeof a.addEventListener?a.addEventListener(b,d,!1):a.document&&a.attachEvent&&(a.document.attachEvent("on"+b,d),a.attachEvent("on"+b,d))},detachEvent:function(b,d){"undefined"!=typeof a.addEventListener?a.removeEventListener(b,d,!1):a.document&&a.detachEvent&&(a.document.detachEvent("on"+b,d),a.detachEvent("on"+b,d))},unloadAdd:function(a){if(f)return null;var b=d.string(8);return c[b]=a,h&&setTimeout(this.triggerUnloadCallbacks,0),b},unloadDel:function(a){a in c&&delete c[a]},triggerUnloadCallbacks:function(){for(var a in c)c[a](),
delete c[a]}};f||e.exports.attachEvent("unload",function(){h||(h=!0,e.exports.triggerUnloadCallbacks())})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(b,e){(function(a){var d=b("./event"),c=b("json3"),h=b("./browser");e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in a||(a[e.exports.WPrefix]={})},postMessage:function(b,d){a.parent!==a&&a.parent.postMessage(c.stringify({windowId:e.exports.currentWindowId,
type:b,data:d||""}),"*")},createIframe:function(b,c){var h,e,k=a.document.createElement("iframe"),q=function(){clearTimeout(h);try{k.onload=null}catch(a){}k.onerror=null},m=function(){k&&(q(),setTimeout(function(){k&&k.parentNode.removeChild(k);k=null},0),d.unloadDel(e))};return k.src=b,k.style.display="none",k.style.position="absolute",k.onerror=function(){k&&(m(),c("onerror"))},k.onload=function(){clearTimeout(h);h=setTimeout(function(){k&&(m(),c("onload timeout"))},2E3)},a.document.body.appendChild(k),
h=setTimeout(function(){k&&(m(),c("timeout"))},15E3),e=d.unloadAdd(m),{post:function(a,b){try{setTimeout(function(){k&&k.contentWindow&&k.contentWindow.postMessage(a,b)},0)}catch(d){}},cleanup:m,loaded:q}},createHtmlfile:function(b,c){var h,n,k,q=["Active"].concat("Object").join("X"),m=new a[q]("htmlfile"),r=function(){clearTimeout(h);k.onerror=null},s=function(){m&&(r(),d.unloadDel(n),k.parentNode.removeChild(k),k=m=null,CollectGarbage())};m.open();m.write('<html><script>document.domain="'+a.document.domain+
'";\x3c/script></html>');m.close();m.parentWindow[e.exports.WPrefix]=a[e.exports.WPrefix];q=m.createElement("div");return m.body.appendChild(q),k=m.createElement("iframe"),q.appendChild(k),k.src=b,k.onerror=function(){m&&(s(),c("onerror"))},h=setTimeout(function(){m&&(s(),c("timeout"))},15E3),n=d.unloadAdd(s),{post:function(a,b){try{setTimeout(function(){k&&k.contentWindow&&k.contentWindow.postMessage(a,b)},0)}catch(d){}},cleanup:s,loaded:r}}};e.exports.iframeEnabled=!1;a.document&&(e.exports.iframeEnabled=
("function"==typeof a.postMessage||"object"==typeof a.postMessage)&&!h.isKonqueror())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:void 0,json3:55}],48:[function(b,e){(function(a){var b={};["log","debug","warn"].forEach(function(c){b[c]=a.console&&a.console[c]&&a.console[c].apply?function(){return a.console[c].apply(a.console,arguments)}:"log"===c?function(){}:b.log});e.exports=b}).call(this,"undefined"!=
typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(b,e){e.exports={isObject:function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},extend:function(a){if(!this.isObject(a))return a;for(var b,c,h=1,f=arguments.length;f>h;h++)for(c in b=arguments[h],b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}}},{}],50:[function(b,e){var a=b("crypto");e.exports={string:function(b){for(var c=a.randomBytes(b),h=[],f=0;b>f;f++)h.push("abcdefghijklmnopqrstuvwxyz012345".substr(c[f]%
32,1));return h.join("")},number:function(a){return Math.floor(Math.random()*a)},numberString:function(a){var b=(""+(a-1)).length;return(Array(b+1).join("0")+this.number(a)).slice(-b)}}},{crypto:43}],51:[function(b,e){e.exports=function(a){return{filterToEnabled:function(b,c){var h={main:[],facade:[]};return b?"string"==typeof b&&(b=[b]):b=[],a.forEach(function(a){a&&("websocket"!==a.transportName||!1!==c.websocket)&&(b.length&&-1===b.indexOf(a.transportName)||a.enabled(c)&&(h.main.push(a),a.facadeTransport&&
h.facade.push(a.facadeTransport)))}),h}}}},{debug:void 0}],52:[function(b,e){var a=b("url-parse");e.exports={getOrigin:function(b){if(!b)return null;b=new a(b);if("file:"===b.protocol)return null;var c=b.port;return c||(c="https:"===b.protocol?"443":"80"),b.protocol+"//"+b.hostname+":"+c},isOriginEqual:function(a,b){return this.getOrigin(a)===this.getOrigin(b)},isSchemeEqual:function(a,b){return a.split(":")[0]===b.split(":")[0]},addPath:function(a,b){var h=a.split("?");return h[0]+b+(h[1]?"?"+h[1]:
"")},addQuery:function(a,b){return a+(-1===a.indexOf("?")?"?"+b:"&"+b)}}},{debug:void 0,"url-parse":56}],53:[function(b,e){e.exports="1.0.3"},{}],54:[function(b,e){e.exports="function"==typeof Object.create?function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a}},{}],55:[function(b,e,a){(function(b){(function(){function c(a,
b){function d(a){if(d[a]!==C)return d[a];var c;if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=d("json-stringify")&&d("json-parse");else{var g;if("json-stringify"==a){c=b.stringify;var h="function"==typeof c&&D;if(h){(g=function(){return 1}).toJSON=g;try{h="0"===c(0)&&"0"===c(new f)&&'""'==c(new e)&&c(x)===C&&c(C)===C&&c()===C&&"1"===c(g)&&"[1]"==c([g])&&"[null]"==c([C])&&"null"==c(null)&&"[null,null,null]"==c([C,x,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==c({a:[g,
!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===c(null,g)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new k(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==c(new k(864E13))&&'"-000001-01-01T00:00:00.000Z"'==c(new k(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==c(new k(-1))}catch(l){h=!1}}c=h}if("json-parse"==a){c=b.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){g=c('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var n=5==g.a.length&&1===g.a[0];if(n){try{n=!c('"\t"')}catch(m){}if(n)try{n=
1!==c("01")}catch(q){}if(n)try{n=1!==c("1.")}catch(p){}}}}catch(r){n=!1}c=n}}return d[a]=!!c}a||(a=g.Object());b||(b=g.Object());var f=a.Number||g.Number,e=a.String||g.String,l=a.Object||g.Object,k=a.Date||g.Date,n=a.SyntaxError||g.SyntaxError,m=a.TypeError||g.TypeError,q=a.Math||g.Math,L=a.JSON||g.JSON;"object"==typeof L&&L&&(b.stringify=L.stringify,b.parse=L.parse);var w,I,C,l=l.prototype,x=l.toString,D=new k(-0xc782b5b800cec);try{D=-109252==D.getUTCFullYear()&&0===D.getUTCMonth()&&1===D.getUTCDate()&&
10==D.getUTCHours()&&37==D.getUTCMinutes()&&6==D.getUTCSeconds()&&708==D.getUTCMilliseconds()}catch(X){}if(!d("json")){var J=d("bug-string-char-index");if(!D)var E=q.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],K=function(a,b){return T[b]+365*(a-1970)+E((a-1969+(b=+(1<b)))/4)-E((a-1901+b)/100)+E((a-1601+b)/400)};if((w=l.hasOwnProperty)||(w=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=x?w=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);
return this.__proto__=b,a}:(b=c.constructor,w=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,w.call(this,a)}),I=function(a,b){var c,d,f,g=0;(c=function(){this.valueOf=0}).prototype.valueOf=0;d=new c;for(f in d)w.call(d,f)&&g++;return c=d=null,g?I=2==g?function(a,b){var c,d={},f="[object Function]"==x.call(a);for(c in a)f&&"prototype"==c||w.call(d,c)||!(d[c]=1)||!w.call(a,c)||b(c)}:function(a,b){var c,d,f="[object Function]"==x.call(a);for(c in a)f&&
"prototype"==c||!w.call(a,c)||(d="constructor"===c)||b(c);(d||w.call(a,c="constructor"))&&b(c)}:(d="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),I=function(a,b){var c,f;f="[object Function]"==x.call(a);var g=!f&&"function"!=typeof a.constructor&&h[typeof a.hasOwnProperty]&&a.hasOwnProperty||w;for(c in a)f&&"prototype"==c||!g.call(a,c)||b(c);for(f=d.length;c=d[--f];g.call(a,c)&&b(c));}),I(a,b)},!d("json-stringify")){var U={92:"\\\\",34:'\\"',
8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},F=function(a,b){return("000000"+(b||0)).slice(-a)},P=function(a){for(var b='"',c=0,d=a.length,f=!J||10<d,g=f&&(J?a.split(""):a);d>c;c++){var h=a.charCodeAt(c);switch(h){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=U[h];break;default:if(32>h){b+="\\u00"+F(2,h.toString(16));break}b+=f?g[c]:a.charAt(c)}}return b+'"'},N=function(a,b,c,d,f,g,h){var e,l,k,n,q,p,r,s,u,t;try{e=b[a]}catch(v){}if("object"==typeof e&&e)if(l=x.call(e),"[object Date]"!=l||
w.call(e,"toJSON"))"function"==typeof e.toJSON&&("[object Number]"!=l&&"[object String]"!=l&&"[object Array]"!=l||w.call(e,"toJSON"))&&(e=e.toJSON(a));else if(e>-1/0&&1/0>e){if(K){q=E(e/864E5);for(k=E(q/365.2425)+1970-1;K(k+1,0)<=q;k++);for(n=E((q-K(k,0))/30.42);K(k,n+1)<=q;n++);q=1+q-K(k,n);p=(e%864E5+864E5)%864E5;r=E(p/36E5)%24;s=E(p/6E4)%60;u=E(p/1E3)%60;p%=1E3}else k=e.getUTCFullYear(),n=e.getUTCMonth(),q=e.getUTCDate(),r=e.getUTCHours(),s=e.getUTCMinutes(),u=e.getUTCSeconds(),p=e.getUTCMilliseconds();
e=(0>=k||1E4<=k?(0>k?"-":"+")+F(6,0>k?-k:k):F(4,k))+"-"+F(2,n+1)+"-"+F(2,q)+"T"+F(2,r)+":"+F(2,s)+":"+F(2,u)+"."+F(3,p)+"Z"}else e=null;if(c&&(e=c.call(b,a,e)),null===e)return"null";if(l=x.call(e),"[object Boolean]"==l)return""+e;if("[object Number]"==l)return e>-1/0&&1/0>e?""+e:"null";if("[object String]"==l)return P(""+e);if("object"==typeof e){for(a=h.length;a--;)if(h[a]===e)throw m();if(h.push(e),t=[],b=g,g+=f,"[object Array]"==l){k=0;for(a=e.length;a>k;k++)l=N(k,e,c,d,f,g,h),t.push(l===C?"null":
l);l=t.length?f?"[\n"+g+t.join(",\n"+g)+"\n"+b+"]":"["+t.join(",")+"]":"[]"}else I(d||e,function(a){var b=N(a,e,c,d,f,g,h);b!==C&&t.push(P(a)+":"+(f?" ":"")+b)}),l=t.length?f?"{\n"+g+t.join(",\n"+g)+"\n"+b+"}":"{"+t.join(",")+"}":"{}";return h.pop(),l}};b.stringify=function(a,b,c){var d,f,g,e;if(h[typeof b]&&b)if("[object Function]"==(e=x.call(b)))f=b;else if("[object Array]"==e){g={};for(var l,k=0,n=b.length;n>k;l=b[k++],e=x.call(l),("[object String]"==e||"[object Number]"==e)&&(g[l]=1));}if(c)if("[object Number]"==
(e=x.call(c))){if(0<(c-=c%1))for(d="",10<c&&(c=10);d.length<c;d+=" ");}else"[object String]"==e&&(d=10>=c.length?c:c.slice(0,10));return N("",(l={},l[""]=a,l),f,g,d,"",[])}}if(!d("json-parse")){var p,M,V=e.fromCharCode,W={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},u=function(){throw p=M=null,n();},G=function(){for(var a,b,c,d,f,g=M,e=g.length;e>p;)switch(f=g.charCodeAt(p)){case 9:case 10:case 13:case 32:p++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=J?
g.charAt(p):g[p],p++,a;case 34:a="@";for(p++;e>p;)if(f=g.charCodeAt(p),32>f)u();else if(92==f)switch(f=g.charCodeAt(++p)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=W[f];p++;break;case 117:b=++p;for(c=p+4;c>p;p++)f=g.charCodeAt(p),48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f||u();a+=V("0x"+g.slice(b,p));break;default:u()}else{if(34==f)break;f=g.charCodeAt(p);for(b=p;32<=f&&92!=f&&34!=f;)f=g.charCodeAt(++p);a+=g.slice(b,p)}if(34==g.charCodeAt(p))return p++,a;u();default:if(b=
p,45==f&&(d=!0,f=g.charCodeAt(++p)),48<=f&&57>=f){for(48==f&&(f=g.charCodeAt(p+1),48<=f&&57>=f)&&u();e>p&&(f=g.charCodeAt(p),48<=f&&57>=f);p++);if(46==g.charCodeAt(p)){for(c=++p;e>c&&(f=g.charCodeAt(c),48<=f&&57>=f);c++);c==p&&u();p=c}if(f=g.charCodeAt(p),101==f||69==f){f=g.charCodeAt(++p);43!=f&&45!=f||p++;for(c=p;e>c&&(f=g.charCodeAt(c),48<=f&&57>=f);c++);c==p&&u();p=c}return+g.slice(b,p)}if(d&&u(),"true"==g.slice(p,p+4))return p+=4,!0;if("false"==g.slice(p,p+5))return p+=5,!1;if("null"==g.slice(p,
p+4))return p+=4,null;u()}return"$"},O=function(a){var b,c;if("$"==a&&u(),"string"==typeof a){if("@"==(J?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=G(),"]"!=a;c||(c=!0))c&&(","==a?(a=G(),"]"==a&&u()):u()),","==a&&u(),b.push(O(a));return b}if("{"==a){for(b={};a=G(),"}"!=a;c||(c=!0))c&&(","==a?(a=G(),"}"==a&&u()):u()),","!=a&&"string"==typeof a&&"@"==(J?a.charAt(0):a[0])&&":"==G()||u(),b[a.slice(1)]=O(G());return b}u()}return a},R=function(a,b,c){c=Q(a,b,c);c===C?delete a[b]:a[b]=c},
Q=function(a,b,c){var d,f=a[b];if("object"==typeof f&&f)if("[object Array]"==x.call(f))for(d=f.length;d--;)R(f,d,c);else I(f,function(a){R(f,a,c)});return c.call(a,b,f)};b.parse=function(a,b){var c,d;return p=0,M=""+a,c=O(G()),"$"!=G()&&u(),p=M=null,b&&"[object Function]"==x.call(b)?Q((d={},d[""]=c,d),"",b):c}}}return b.runInContext=c,b}var h={"function":!0,object:!0},f=h[typeof a]&&a&&!a.nodeType&&a,g=h[typeof window]&&window||this,l=f&&h[typeof e]&&e&&!e.nodeType&&"object"==typeof b&&b;if(!l||l.global!==
l&&l.window!==l&&l.self!==l||(g=l),f&&!0)c(g,f);else{var n=g.JSON,k=g.JSON3,q=!1,m=c(g,g.JSON3={noConflict:function(){return q||(q=!0,g.JSON=n,g.JSON3=k,n=k=null),m}});g.JSON={parse:m.parse,stringify:m.stringify}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(b,e){function a(b,e,k){if(!(this instanceof a))return new a(b,e,k);var q,m,r,s,y=f.test(b);q=typeof e;var v=0;"object"!==q&&"string"!==q&&(k=e,
e=null);k&&"function"!=typeof k&&(k=h.parse);for(e=c(e);v<g.length;v++)m=g[v],q=m[0],s=m[1],q!==q?this[s]=b:"string"==typeof q?~(r=b.indexOf(q))&&("number"==typeof m[2]?(this[s]=b.slice(0,r),b=b.slice(r+m[2])):(this[s]=b.slice(r),b=b.slice(0,r))):(r=q.exec(b))&&(this[s]=r[1],b=b.slice(0,b.length-r[0].length)),this[s]=this[s]||(m[3]||"port"===s&&y?e[s]||"":""),m[4]&&(this[s]=this[s].toLowerCase());k&&(this.query=k(this.query));d(this.port,this.protocol)||(this.host=this.hostname,this.port="");this.username=
this.password="";this.auth&&(m=this.auth.split(":"),this.username=m[0]||"",this.password=m[1]||"");this.href=this.toString()}var d=b("requires-port"),c=b("./lolcation"),h=b("querystringify"),f=/^\/(?!\/)/,g=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[0/0,"host",void 0,1,1],[/\:(\d+)$/,"port"],[0/0,"hostname",void 0,1,1]];a.prototype.set=function(a,b,c){return"query"===a?("string"==typeof b&&(b=(c||h.parse)(b)),this[a]=b):"port"===a?(this[a]=b,d(b,this.protocol)?
b&&(this.host=this.hostname+":"+b):(this.host=this.hostname,this[a]="")):"hostname"===a?(this[a]=b,this.port&&(b+=":"+this.port),this.host=b):"host"===a?(this[a]=b,/\:\d+/.test(b)&&(b=b.split(":"),this.hostname=b[0],this.port=b[1])):this[a]=b,this.href=this.toString(),this};a.prototype.toString=function(a){a&&"function"==typeof a||(a=h.stringify);var b,c=this.protocol+"//";return this.username&&(c+=this.username,this.password&&(c+=":"+this.password),c+="@"),c+=this.hostname,this.port&&(c+=":"+this.port),
c+=this.pathname,this.query&&(b="object"==typeof this.query?a(this.query):this.query,c+=("?"===b.charAt(0)?"":"?")+b),this.hash&&(c+=this.hash),c};a.qs=h;a.location=c;e.exports=a},{"./lolcation":57,querystringify:58,"requires-port":59}],57:[function(b,e){(function(a){var d,c={hash:1,query:1};e.exports=function(e){e=e||a.location||{};d=d||b("./");var f,g={},l=typeof e;if("blob:"===e.protocol)g=new d(unescape(e.pathname),{});else if("string"===l)for(f in g=new d(e,{}),c)delete g[f];else if("object"===
l)for(f in e)f in c||(g[f]=e[f]);return g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":56}],58:[function(b,e,a){var d=Object.prototype.hasOwnProperty;a.stringify=function(a,b){b=b||"";var f=[];"string"!=typeof b&&(b="?");for(var g in a)d.call(a,g)&&f.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return f.length?b+f.join("&"):""};a.parse=function(a){for(var b,d=/([^=?&]+)=([^&]*)/g,g={};b=d.exec(a);g[decodeURIComponent(b[1])]=
decodeURIComponent(b[2]));return g}},{}],59:[function(b,e){e.exports=function(a,b){if(b=b.split(":")[0],a=+a,!a)return!1;switch(b){case "http":case "ws":return 80!==a;case "https":case "wss":return 443!==a;case "ftp":return 22!==a;case "gopher":return 70!==a;case "file":return!1}return 0!==a}},{}]},{},[1])(1)});
(function(){var H,b,e,a={}.hasOwnProperty,d=[].slice;b=function(){function b(a,c,d){this.command=a;this.headers=null!=c?c:{};this.body=null!=d?d:""}var d;b.prototype.toString=function(){var d,g,e,h,k;d=[this.command];(e=!1===this.headers["content-length"]?!0:!1)&&delete this.headers["content-length"];k=this.headers;for(g in k)a.call(k,g)&&(h=k[g],d.push(""+g+":"+h));this.body&&!e&&d.push("content-length:"+b.sizeOfUTF8(this.body));d.push("\n"+this.body);return d.join("\n")};b.sizeOfUTF8=function(a){return a?
encodeURI(a).match(/%..|./g).length:0};d=function(a){var d,e,h,k,q,m,r,s,y;k=a.search(/\n\n/);q=a.substring(0,k).split("\n");h=q.shift();m={};d=function(a){return a.replace(/^\s+|\s+$/g,"")};y=q.reverse();e=0;for(s=y.length;e<s;e++)r=y[e],q=r.indexOf(":"),m[d(r.substring(0,q))]=d(r.substring(q+1));d="";k+=2;if(m["content-length"])d=parseInt(m["content-length"]),d=(""+a).substring(k,k+d);else for(e=null,e=q=k,r=a.length;k<=r?q<r:q>r;e=k<=r?++q:--q){e=a.charAt(e);if("\x00"===e)break;d+=e}return new b(h,
m,d)};b.unmarshall=function(a){var b,c,e,k;e=a.split(/\x00\n*/);k=[];b=0;for(c=e.length;b<c;b++)a=e[b],0<(null!=a?a.length:void 0)&&k.push(d(a));return k};b.marshall=function(a,d,e){return(new b(a,d,e)).toString()+"\x00"};return b}();H=function(){function a(b){this.ws=b;this.ws.binaryType="arraybuffer";this.counter=0;this.connected=!1;this.heartbeat={outgoing:1E4,incoming:1E4};this.maxWebSocketFrameSize=16384;this.subscriptions={}}var h;a.prototype.debug=function(a){var b;return"undefined"!==typeof window&&
null!==window?null!=(b=window.console)?b.log(a):void 0:void 0};h=function(){return Date.now?Date.now():(new Date).valueOf};a.prototype._transmit=function(a,c,d){a=b.marshall(a,c,d);for("function"===typeof this.debug&&this.debug(">>> "+a);;)if(a.length>this.maxWebSocketFrameSize)this.ws.send(a.substring(0,this.maxWebSocketFrameSize)),a=a.substring(this.maxWebSocketFrameSize),"function"===typeof this.debug&&this.debug("remaining = "+a.length);else return this.ws.send(a)};a.prototype._setupHeartbeat=
function(a){var b,c,d,k;if((c=a.version)===e.VERSIONS.V1_1||c===e.VERSIONS.V1_2)if(b=function(){var b,c,d,e;d=a["heart-beat"].split(",");e=[];b=0;for(c=d.length;b<c;b++)k=d[b],e.push(parseInt(k));return e}(),c=b[0],b=b[1],0!==this.heartbeat.outgoing&&0!==b&&(d=Math.max(this.heartbeat.outgoing,b),"function"===typeof this.debug&&this.debug("send PING every "+d+"ms"),this.pinger=e.setInterval(d,function(a){return function(){a.ws.send("\n");return"function"===typeof a.debug?a.debug(">>> PING"):void 0}}(this))),
0!==this.heartbeat.incoming&&0!==c)return d=Math.max(this.heartbeat.incoming,c),"function"===typeof this.debug&&this.debug("check PONG every "+d+"ms"),this.ponger=e.setInterval(d,function(a){return function(){var b;b=h()-a.serverActivity;if(b>2*d)return"function"===typeof a.debug&&a.debug("did not receive server activity for the last "+b+"ms"),a.ws.close()}}(this))};a.prototype._parseConnect=function(){var a,b,c,e;a=1<=arguments.length?d.call(arguments,0):[];e={};switch(a.length){case 2:e=a[0];b=
a[1];break;case 3:a[1]instanceof Function?(e=a[0],b=a[1],c=a[2]):(e.login=a[0],e.passcode=a[1],b=a[2]);break;case 4:e.login=a[0];e.passcode=a[1];b=a[2];c=a[3];break;default:e.login=a[0],e.passcode=a[1],b=a[2],c=a[3],e.host=a[4]}return[e,b,c]};a.prototype.connect=function(){var a,c,l;a=1<=arguments.length?d.call(arguments,0):[];a=this._parseConnect.apply(this,a);l=a[0];this.connectCallback=a[1];c=a[2];"function"===typeof this.debug&&this.debug("Opening Web Socket...");this.ws.onmessage=function(a){return function(d){var e,
f,l,s,y,v,t,z,B,A;d="undefined"!==typeof ArrayBuffer&&d.data instanceof ArrayBuffer?(e=new Uint8Array(d.data),"function"===typeof a.debug?a.debug("--- got data length: "+e.length):void 0,function(){var a,b,c;c=[];a=0;for(b=e.length;a<b;a++)f=e[a],c.push(String.fromCharCode(f));return c}().join("")):d.data;a.serverActivity=h();if("\n"===d)"function"===typeof a.debug&&a.debug("<<< PONG");else{"function"===typeof a.debug&&a.debug("<<< "+d);B=b.unmarshall(d);A=[];t=0;for(z=B.length;t<z;t++)switch(d=B[t],
d.command){case "CONNECTED":"function"===typeof a.debug&&a.debug("connected to server "+d.headers.server);a.connected=!0;a._setupHeartbeat(d.headers);A.push("function"===typeof a.connectCallback?a.connectCallback(d):void 0);break;case "MESSAGE":v=d.headers.subscription;(y=a.subscriptions[v]||a.onreceive)?(l=a,s=d.headers["message-id"],d.ack=function(a){null==a&&(a={});return l.ack(s,v,a)},d.nack=function(a){null==a&&(a={});return l.nack(s,v,a)},A.push(y(d))):A.push("function"===typeof a.debug?a.debug("Unhandled received MESSAGE: "+
d):void 0);break;case "RECEIPT":A.push("function"===typeof a.onreceipt?a.onreceipt(d):void 0);break;case "ERROR":A.push("function"===typeof c?c(d):void 0);break;default:A.push("function"===typeof a.debug?a.debug("Unhandled frame: "+d):void 0)}return A}}}(this);this.ws.onclose=function(a){return function(){var b;b="Whoops! Lost connection to "+a.ws.url;"function"===typeof a.debug&&a.debug(b);a._cleanUp();return"function"===typeof c?c(b):void 0}}(this);return this.ws.onopen=function(a){return function(){"function"===
typeof a.debug&&a.debug("Web Socket Opened...");l["accept-version"]=e.VERSIONS.supportedVersions();l["heart-beat"]=[a.heartbeat.outgoing,a.heartbeat.incoming].join();return a._transmit("CONNECT",l)}}(this)};a.prototype.disconnect=function(a,b){null==b&&(b={});this._transmit("DISCONNECT",b);this.ws.onclose=null;this.ws.close();this._cleanUp();return"function"===typeof a?a():void 0};a.prototype._cleanUp=function(){this.connected=!1;this.pinger&&e.clearInterval(this.pinger);if(this.ponger)return e.clearInterval(this.ponger)};
a.prototype.send=function(a,b,c){null==b&&(b={});null==c&&(c="");b.destination=a;return this._transmit("SEND",b,c)};a.prototype.subscribe=function(a,b,c){var d;null==c&&(c={});c.id||(c.id="sub-"+this.counter++);c.destination=a;this.subscriptions[c.id]=b;this._transmit("SUBSCRIBE",c);d=this;return{id:c.id,unsubscribe:function(){return d.unsubscribe(c.id)}}};a.prototype.unsubscribe=function(a){delete this.subscriptions[a];return this._transmit("UNSUBSCRIBE",{id:a})};a.prototype.begin=function(a){var b,
c;c=a||"tx-"+this.counter++;this._transmit("BEGIN",{transaction:c});b=this;return{id:c,commit:function(){return b.commit(c)},abort:function(){return b.abort(c)}}};a.prototype.commit=function(a){return this._transmit("COMMIT",{transaction:a})};a.prototype.abort=function(a){return this._transmit("ABORT",{transaction:a})};a.prototype.ack=function(a,b,c){null==c&&(c={});c["message-id"]=a;c.subscription=b;return this._transmit("ACK",c)};a.prototype.nack=function(a,b,c){null==c&&(c={});c["message-id"]=
a;c.subscription=b;return this._transmit("NACK",c)};return a}();e={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(a,b){var d;null==b&&(b=["v10.stomp","v11.stomp"]);d=new (e.WebSocketClass||WebSocket)(a,b);return new H(d)},over:function(a){return new H(a)},Frame:b};"undefined"!==typeof exports&&null!==exports&&(exports.Stomp=e);"undefined"!==typeof window&&null!==window?(e.setInterval=function(a,b){return window.setInterval(b,a)},e.clearInterval=
function(a){return window.clearInterval(a)},window.Stomp=e):exports||(self.Stomp=e)}).call(this);
